!function(t,i,o,e,n){function s(t){this.options=p.extend({},m,t||{}),this._id="passport"+(c+Math.random()).replace(/\D/g,""),this.appid=this.options.appid||9998,this.domain=this.options.domain||this.parseDomain(),this._iframe=null,this._form=null,this.cookie=this.parseCookie(),this.on("reloadcookie",p.bind(this.reloadCookie,this))}function r(){var t,i=e.get("lastdomain");return i&&(t=function(t){var i,e=t.split("|"),n=[];if(e.length>=3){i=o.decode(e[1]).split("|");for(var s=0;s<i.length;s++)i[s]&&n.push(i[s])}return n}(i)),t||[]}if(!t.SohuPassport){var a,u,c="2.0.0",h=t.location,l=!1,p={extend:function(){var t,i,o,e,s=arguments[0]||{},r=arguments.length;for(t=1;r>t;t++)if(null!==(o=arguments[t]))for(i in o)e=o[i],e!==n&&(s[i]=e);return s},inArray:function(t,i){for(var o=0;o<i.length;o++)if(i[o]===t)return o;return-1},isString:function(t){return"string"==typeof t},isFunction:function(t){return"function"==typeof t},isBool:function(t){return"boolean"==typeof t},bind:function(t,i){return function(){t.apply(i,arguments)}},trim:function(t){return this.isString(t)?t.replace(/^\s+/,"").replace(/\s+$/,""):t},param:function(t){var i=[];for(var o in t)i.push(o+"="+t[o]);return i.join("&")},url:function(t,i){var o=/\?/;return t+=(o.test(t)?"&":"?")+this.param(i)}},f=function(){function i(t){t=t.toLowerCase();var i=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[],o=/(ipad)/.exec(t)||/(iphone)/.exec(t)||/(android)/.exec(t)||[];return{browser:i[1]||"",version:i[2]||"0",platform:o[0]||""}}var o,e;return o=i(t.navigator.userAgent),e={},o.browser&&(e[o.browser]=!0,e.version=o.version),o.platform&&(e[o.platform]=!0),e.chrome?e.webkit=!0:e.webkit&&(e.safari=!0),e}(),d={data:{},add:function(t,i,o){return t&&i&&o?(this.data[t]||(this.data[t]={}),this.data[t][i]||(this.data[t][i]=[]),-1==p.inArray(o,this.data[t][i])&&this.data[t][i].push(o),!0):!1},remove:function(t,i,o){if(!t)return!1;if(i)if(o){var e=this.data[t][i]||[],n=p.inArray(o,e);n>-1&&e.splice(n,1)}else this.data[t][i]=[];else this.data[t]={};return!0},fire:function(t,i,o){if(!t)return!1;if(i instanceof s||"object"!=typeof i||(o=i,i=null),i)this.data[i._id]&&this.exec(this.data[i._id][t]||[],o);else for(var e in this.data)this.exec(this.data[e][t]||[],o)},fireWithout:function(t,i,o){if(!t)return!1;if(i instanceof s||"object"!=typeof i||(o=i,i=null),i)for(var e in this.data)e!==i._id&&this.exec(this.data[e][t]||[],o);else this.fire(t,o)},exec:function(t,i){for(var o=0;o<t.length;o++)p.isFunction(t[o])&&t[o](i||{})}},m={appid:9998,domain:"",loginURL:"//passport.sohu.com/apiv2/login",logoutURL:"//passport.sohu.com/apiv2/logout",getLoginURL:"//passport.sohu.com/apiv2/login",getLogoutURL:"//passport.sohu.com/apiv2/logout",dcLoginURL:"//passport.sohu.com/apiv2/mlogin",otherdomain:["chinaren.com","focus.cn"]},g=(new Date).getTime(),v=!1,C=!1,b=1e4,_={USERID_EMPTY:101,PWD_EMPTY:102,MOBILE_EMPTY:103,CAPTCHA_EMPTY:104};s.prototype={randomName:function(t){return this._id+"_"+t+g++},login:function(t,i){if(v)return this;if(this._abort=!1,d.fire("beforeloginsubmit",this,{}),this._abort)return this;if(""===p.trim(t.userid))return d.fire("error",this,{code:_.USERID_EMPTY,msg:"请输入通行证账号"}),this;if(""===p.trim(t.password))return d.fire("error",this,{code:_.PWD_EMPTY,msg:"请输入通行证密码"}),this;var o=i&&i.toLowerCase()||"post";return"post"===o?this._doPostLogin(t):"get"===o&&this._doGetLogin(t),this},_doPostLogin:function(i){var o=this.formData(i,"login");document.domain=this.domain,v=!0,this._iframe=this.createIframe(),this._form=this.createForm(o),p.isString(o.callback)&&(t[o.callback]=p.bind(this.postLoginCallback,this)),this._form.action=this.options.loginURL,this._form.method="POST",this._form.target=this._iframe.name,this._form.submit(),d.fire("loginsubmit",this,{}),a&&clearTimeout(a),a=setTimeout(function(){v=!1},b)},_doGetLogin:function(t){var i=this.formData(t,"login");i.callback="?",i.userid=encodeURIComponent(i.userid),v=!0;var o=p.url(this.options.getLoginURL,i),e=p.bind(this.getLoginCallback,this);this.getJSONP(o,e),d.fire("loginsubmit",this,{}),a&&clearTimeout(a),a=setTimeout(function(){v=!1},b)},loginByDynamicCode:function(t,i){if(v)return this;if(this._abort=!1,d.fire("beforeloginsubmit",this,{}),this._abort)return this;if(""===p.trim(t.mobile))return d.fire("error",this,{code:_.MOBILE_EMPTY,msg:"请输入手机号码"}),this;if(""===p.trim(t.captcha))return d.fire("error",this,{code:_.CAPTCHA_EMPTY,msg:"请输入动态码"}),this;var o=i&&i.toLowerCase()||"post";return"post"===o&&this._doPostDCLogin(t),this},_doPostDCLogin:function(i){var o=this.formData(i,"dclogin");document.domain=this.domain,v=!0,this._iframe=this.createIframe(),this._form=this.createForm(o),p.isString(o.callback)&&(t[o.callback]=p.bind(this.postLoginCallback,this)),this._form.action=this.options.dcLoginURL,this._form.method="POST",this._form.target=this._iframe.name,this._form.submit(),d.fire("loginsubmit",this,{}),a&&clearTimeout(a),a=setTimeout(function(){v=!1},b)},logout:function(t,i){if(C)return this;t=p.extend({},t||{});var o=i&&i.toLowerCase()||"post";return"post"===o?this._doPostLogout(t):"get"===o&&this._doGetLogout(t),this},_doPostLogout:function(i){var o=this.formData(i,"logout");document.domain=this.domain,C=!0,this._iframe=this.createIframe(),this._form=this.createForm(o),p.isString(o.callback)&&(t[o.callback]=p.bind(this.postLogoutCallback,this)),this._form.action=this.options.logoutURL,this._form.method="POST",this._form.target=this._iframe.name,this._form.submit(),u&&clearTimeout(u),u=setTimeout(function(){C=!1},b)},_doGetLogout:function(t){var i=this.formData(t,"logout");i.callback="?",C=!0;var o=p.url(this.options.getLogoutURL,i),e=p.bind(this.getLogoutCallback,this);this.getJSONP(o,e),u&&clearTimeout(u),u=setTimeout(function(){C=!1},b)},on:function(t,i){return d.add(this._id,t,i),this},off:function(t,i){return d.remove(this._id,t,i),this},abortLoginSubmit:function(){return this._abort=!0,this},createIframe:function(t){t=t||this.randomName("ifa");var i;return f.msie&&parseInt(f.version,10)<9?i=document.createElement('<iframe src="about:blank" name="'+t+'"></iframe>'):(i=document.createElement("iframe"),i.setAttribute("name",t)),i.style.display="none",document.body.appendChild(i),i},createForm:function(t){var i,o,e,n=document.createElement("form");for(o in t)e=t[o],i=document.createElement("input"),i.type="hidden",i.name=o,i.value=e,n.appendChild(i);return n.style.display="none",document.body.appendChild(n),n},formData:function(t,o){var e={domain:t.domain||this.domain,callback:this.randomName("cb")};if("login"===o||"dclogin"===o){e.appid=this.appid;for(var n in t)"password"===n?e.password=i(p.trim(t.password)):"pc"===n?e.persistentcookie=t.pc?1:0:e[n]=p.trim(t[n])}return e},postLoginCallback:function(t){v=!1,a&&clearTimeout(a),this.clearTempElements(),d.fire("reloadcookie",{}),0===t.code?(d.fire("login",this,t),d.fireWithout("login",this,t)):d.fire("error",this,t)},postLogoutCallback:function(t){C=!1,u&&clearTimeout(u),this.clearTempElements(),d.fire("reloadcookie",{}),0===t.code&&(d.fire("logout",this,t),d.fireWithout("logout",this,t))},getLoginCallback:function(t){v=!1,a&&clearTimeout(a),0===t.code?this.setOtherDomainCookie("login"):d.fire("error",this,t)},getLogoutCallback:function(t){C=!1,u&&clearTimeout(u),0===t.code&&this.setOtherDomainCookie("logout")},clearTempElements:function(){this._form&&(document.body.removeChild(this._form),this._form=null),this._iframe&&(document.body.removeChild(this._iframe),this._iframe=null)},setOtherDomainCookie:function(t){function i(){r++,r>=a&&(d.fire("reloadcookie",{}),d.fire(t,s,data),d.fireWithout(t,s,data))}var o,e,n,s=this,r=0,a=this.options.otherdomain.length;for(n=0;a>n;n++)e=this.options.otherdomain[n],o="//passport.sohu.com/sso/crossdomain.jsp?"+p.param({action:t,domain:e}),this.script(o,i)},getLastdomain:r,parseCookie:function(){var t,i=e.get("ppinf")||e.get("ppinfo")||e.get("passport");return i&&(t=this.parseUserInfo(o.decode(i.split("|")[3]))),t},parseUserInfo:function(t){for(var i,o=t.split("|"),e={},n=0;n<o.length;n++)o[n]&&(i=o[n].split(":"),3==i.length&&i[2].length==parseInt(i[1],10)&&(e[i[0]]=i[2]));return e},parseDomain:function(){var t=this.parseLocation().hostname,i=/(sohu\.com|focus\.cn|chinaren\.com|sogou\.com)$/.exec(t)||[];return i[1]},parseLocation:function(){var t,i,o=/^([\w\+\.\-]+):(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/;try{t=h.href}catch(e){t=document.createElement("div"),t.innerHTML='<a href="./"></a>',t=t.getElementsByTagName("a")[0].href}return i=o.exec(t.toLowerCase())||[],{href:t,url:i[0],protocol:i[1],hostname:i[2],port:i[3]||""}},reloadCookie:function(){this.cookie=this.parseCookie()},getJSONP:function(i,o,e){var s,r=this.randomName("cb"),a=document.getElementsByTagName("head")[0],u=document.createElement("script"),c=/\?/,h=/(=)\?(?=&|$)|\?\?/,l=/([?&])_=[^&]*/,f=(new Date).getTime();i=i.replace(h,"$1"+r),s=i.replace(l,"$1_="+f),i=s+(s===i?(c.test(i)?"&":"?")+"_="+f:""),t[r]=function(i){p.isFunction(o)&&o(i),t[r]=n,a.removeChild(u)},u.type="text/javascript",u.charset=e||"UTF-8",u.src=i,a.appendChild(u)},script:function(t,i,o){var e=document.getElementsByTagName("head")[0],s=document.createElement("script");s.type="text/javascript",s.charset=o||"UTF-8",s.src=t,s.onload=s.onreadystatechange=function(){(!s.readyState||/loaded|complete/.test(s.readyState))&&(s.onload=s.onreadystatechange=null,e&&s.parentNode&&e.removeChild(s),s=n,p.isFunction(i)&&i())},e.appendChild(s)}};var y=function(t){function i(){o&&(clearInterval(o),o=null)}var o,e=new s(t);return{isLogin:function(){return!!this.cookie(!0)},login:function(t,i){return e.login(t,i),this},loginByDynamicCode:function(t,i){return e.loginByDynamicCode(t,i),this},logout:function(t,i){return e.logout(t,i),this},on:function(t,i){return e.on(t,i),this},off:function(t,i){return e.off(t,i),this},location:function(){return e.parseLocation()},abortLoginSubmit:function(){return e.abortLoginSubmit(),this},cookie:function(t,i){if((p.isBool(t)&&t===!0||p.isString(t)&&i)&&e.reloadCookie(),!p.isString(t)||!e.cookie)return e.cookie;var o;switch(t){case"uniqname":case"nickname":o=decodeURIComponent(e.cookie.uniqname);break;case"passport":case"userid":o=e.cookie.userid;break;default:o=e.cookie[t]}return o},provider:function(){var t=this.cookie("userid",!0)||"",i=t.match(/^[^@]+@(\w+)\.sohu\.com$/)||"";return i&&i[1]},lastdomain:function(){return e.getLastdomain()},watchOAuth:function(t){var e=this,n=+new Date;return t=1e3*(t||60),i(),o=setInterval(function(){var o=+new Date-n;e.isLogin()?(i(),d.fire("login",{})):o>t&&i()},500),this}}};y.debug=function(t){l=t},y.version=c,y.utils=p,y.browser=f,y.quickLogout=function(t){var i=new s;i.on("logout",function(){t?h.href=t:h.reload()}),i.logout()},t.SohuPassport=y,"function"==typeof define&&define.amd&&define("sohupassport",[],function(){return y})}}(window,function(){var t=function(t){function i(t){return l(o(h(t),t.length*f))}function o(t,i){t[i>>5]|=128<<i%32,t[(i+64>>>9<<4)+14]=i;for(var o=1732584193,e=-271733879,c=-1732584194,h=271733878,l=0;l<t.length;l+=16){var p=o,f=e,d=c,m=h;o=n(o,e,c,h,t[l+0],7,-680876936),h=n(h,o,e,c,t[l+1],12,-389564586),c=n(c,h,o,e,t[l+2],17,606105819),e=n(e,c,h,o,t[l+3],22,-1044525330),o=n(o,e,c,h,t[l+4],7,-176418897),h=n(h,o,e,c,t[l+5],12,1200080426),c=n(c,h,o,e,t[l+6],17,-1473231341),e=n(e,c,h,o,t[l+7],22,-45705983),o=n(o,e,c,h,t[l+8],7,1770035416),h=n(h,o,e,c,t[l+9],12,-1958414417),c=n(c,h,o,e,t[l+10],17,-42063),e=n(e,c,h,o,t[l+11],22,-1990404162),o=n(o,e,c,h,t[l+12],7,1804603682),h=n(h,o,e,c,t[l+13],12,-40341101),c=n(c,h,o,e,t[l+14],17,-1502002290),e=n(e,c,h,o,t[l+15],22,1236535329),o=s(o,e,c,h,t[l+1],5,-165796510),h=s(h,o,e,c,t[l+6],9,-1069501632),c=s(c,h,o,e,t[l+11],14,643717713),e=s(e,c,h,o,t[l+0],20,-373897302),o=s(o,e,c,h,t[l+5],5,-701558691),h=s(h,o,e,c,t[l+10],9,38016083),c=s(c,h,o,e,t[l+15],14,-660478335),e=s(e,c,h,o,t[l+4],20,-405537848),o=s(o,e,c,h,t[l+9],5,568446438),h=s(h,o,e,c,t[l+14],9,-1019803690),c=s(c,h,o,e,t[l+3],14,-187363961),e=s(e,c,h,o,t[l+8],20,1163531501),o=s(o,e,c,h,t[l+13],5,-1444681467),h=s(h,o,e,c,t[l+2],9,-51403784),c=s(c,h,o,e,t[l+7],14,1735328473),e=s(e,c,h,o,t[l+12],20,-1926607734),o=r(o,e,c,h,t[l+5],4,-378558),h=r(h,o,e,c,t[l+8],11,-2022574463),c=r(c,h,o,e,t[l+11],16,1839030562),e=r(e,c,h,o,t[l+14],23,-35309556),o=r(o,e,c,h,t[l+1],4,-1530992060),h=r(h,o,e,c,t[l+4],11,1272893353),c=r(c,h,o,e,t[l+7],16,-155497632),e=r(e,c,h,o,t[l+10],23,-1094730640),o=r(o,e,c,h,t[l+13],4,681279174),h=r(h,o,e,c,t[l+0],11,-358537222),c=r(c,h,o,e,t[l+3],16,-722521979),e=r(e,c,h,o,t[l+6],23,76029189),o=r(o,e,c,h,t[l+9],4,-640364487),h=r(h,o,e,c,t[l+12],11,-421815835),c=r(c,h,o,e,t[l+15],16,530742520),e=r(e,c,h,o,t[l+2],23,-995338651),o=a(o,e,c,h,t[l+0],6,-198630844),h=a(h,o,e,c,t[l+7],10,1126891415),c=a(c,h,o,e,t[l+14],15,-1416354905),e=a(e,c,h,o,t[l+5],21,-57434055),o=a(o,e,c,h,t[l+12],6,1700485571),h=a(h,o,e,c,t[l+3],10,-1894986606),c=a(c,h,o,e,t[l+10],15,-1051523),e=a(e,c,h,o,t[l+1],21,-2054922799),o=a(o,e,c,h,t[l+8],6,1873313359),h=a(h,o,e,c,t[l+15],10,-30611744),c=a(c,h,o,e,t[l+6],15,-1560198380),e=a(e,c,h,o,t[l+13],21,1309151649),o=a(o,e,c,h,t[l+4],6,-145523070),h=a(h,o,e,c,t[l+11],10,-1120210379),c=a(c,h,o,e,t[l+2],15,718787259),e=a(e,c,h,o,t[l+9],21,-343485551),o=u(o,p),e=u(e,f),c=u(c,d),h=u(h,m)}return Array(o,e,c,h)}function e(t,i,o,e,n,s){return u(c(u(u(i,t),u(e,s)),n),o)}function n(t,i,o,n,s,r,a){return e(i&o|~i&n,t,i,s,r,a)}function s(t,i,o,n,s,r,a){return e(i&n|o&~n,t,i,s,r,a)}function r(t,i,o,n,s,r,a){return e(i^o^n,t,i,s,r,a)}function a(t,i,o,n,s,r,a){return e(o^(i|~n),t,i,s,r,a)}function u(t,i){var o=(65535&t)+(65535&i),e=(t>>16)+(i>>16)+(o>>16);return e<<16|65535&o}function c(t,i){return t<<i|t>>>32-i}function h(t){for(var i=Array(),o=(1<<f)-1,e=0;e<t.length*f;e+=f)i[e>>5]|=(t.charCodeAt(e/f)&o)<<e%32;return i}function l(t){for(var i=p?"0123456789ABCDEF":"0123456789abcdef",o="",e=0;e<4*t.length;e++)o+=i.charAt(t[e>>2]>>e%4*8+4&15)+i.charAt(t[e>>2]>>e%4*8&15);return o}var p=0,f=8;return i(t)};return t}(),function(){var t={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(i){var o,e,n,s,r,a,u,c="",h=0;for(i=this.encodeURL(i),i=t._utf8_encode(i);h<i.length;)o=i.charCodeAt(h++),e=i.charCodeAt(h++),n=i.charCodeAt(h++),s=o>>2,r=(3&o)<<4|e>>4,a=(15&e)<<2|n>>6,u=63&n,isNaN(e)?a=u=64:isNaN(n)&&(u=64),c=c+this._keyStr.charAt(s)+this._keyStr.charAt(r)+this._keyStr.charAt(a)+this._keyStr.charAt(u);return c},decode:function(i){var o,e,n,s,r,a,u,c="",h=0;for(i=this.decodeUrl(i),i=i.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<i.length;)s=this._keyStr.indexOf(i.charAt(h++)),r=this._keyStr.indexOf(i.charAt(h++)),a=this._keyStr.indexOf(i.charAt(h++)),u=this._keyStr.indexOf(i.charAt(h++)),o=s<<2|r>>4,e=(15&r)<<4|a>>2,n=(3&a)<<6|u,c+=String.fromCharCode(o),64!=a&&(c+=String.fromCharCode(e)),64!=u&&(c+=String.fromCharCode(n));return c=t._utf8_decode(c)},_utf8_encode:function(t){t=t.replace(/\r\n/g,"\n");for(var i="",o=0;o<t.length;o++){var e=t.charCodeAt(o);128>e?i+=String.fromCharCode(e):e>127&&2048>e?(i+=String.fromCharCode(e>>6|192),i+=String.fromCharCode(63&e|128)):(i+=String.fromCharCode(e>>12|224),i+=String.fromCharCode(e>>6&63|128),i+=String.fromCharCode(63&e|128))}return i},_utf8_decode:function(t){for(var i="",o=0,e=0,n=0;o<t.length;)e=t.charCodeAt(o),128>e?(i+=String.fromCharCode(e),o++):e>191&&224>e?(n=t.charCodeAt(o+1),i+=String.fromCharCode((31&e)<<6|63&n),o+=2):(n=t.charCodeAt(o+1),c3=t.charCodeAt(o+2),i+=String.fromCharCode((15&e)<<12|(63&n)<<6|63&c3),o+=3);return i},encodeURL:function(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")},decodeUrl:function(t){var i,o;return t.length%4===0?i=t:(o=t.length%4,i=(t+"===").slice(0,t.length+4-o)),i.replace(/-/g,"+").replace(/_/g,"/")}};return t}(),function(){function t(t,o){var e={};if(i(t)&&t.length>0)for(var s,a,u,c=o?r:n,h=t.split(/;\s/g),l=0,p=h.length;p>l;l++){if(u=h[l].match(/([^=]+)=/i),u instanceof Array)try{s=r(u[1]),a=c(h[l].substring(u[1].length+1))}catch(f){}else s=r(h[l]),a="";s&&(e[s]=a)}return e}function i(t){return"string"==typeof t}function o(t){return i(t)&&""!==t}function e(t){if(!o(t))throw new TypeError("Cookie name must be a non-empty string")}function n(t){return t}var s={},r=decodeURIComponent,a=encodeURIComponent;return s.get=function(i,o){e(i),o="function"==typeof o?{converter:o}:o||{};var s=t(document.cookie,!o.raw);return(o.converter||n)(s[i])},s.set=function(t,i,n){e(t),n=n||{};var s=n.expires,r=n.domain,u=n.path;n.raw||(i=a(String(i)));var c=t+"="+i,h=s;return"number"==typeof h&&(h=new Date,h.setDate(h.getDate()+s)),h instanceof Date&&(c+="; expires="+h.toUTCString()),o(r)&&(c+="; domain="+r),o(u)&&(c+="; path="+u),n.secure&&(c+="; secure"),document.cookie=c,c},s.remove=function(t,i){return i=i||{},i.expires=new Date(0),this.set(t,"",i)},s}()),function(t){"function"==typeof define&&define.amd?define("sohupassportui",["jquery","sohupassport"],t):t(jQuery,SohuPassport)}(function(t,i){function o(){}function e(e,n){this.input=t(e),this.options=t.extend({appendTo:"",domainList:r,autoselect:!0,limit:0,delay:300,width:0,left:-1,top:-1,title:"请选择您的用户账号类型",containerClassName:"passport-autocomplete",titleClassName:"passport-autocomplete-title",itemClassName:"passport-autocomplete-item",itemActiveClassName:"passport-autocomplete-active",onselected:o},n||{}),this.keypress=!1,this.sid=null,this.blursid=null,this.previousValue="",this.lastdomain=i().lastdomain(),this._prepareDomainList(),this._init(),this._bindEvent()}function n(o){this.options=t.extend({appid:"9998",userid:null,password:null,domain:"",pc:null,loginType:"POST",logoutType:"POST",autocomplete:!0,onerror:null,onbeforeloginsubmit:null,onloginsubmit:null,onlogin:null,onlogout:null},o||{}),this.options.userid&&this.options.password&&(this.sp=i({appid:this.options.appid,domain:this.options.domain}),this.userid=t(this.options.userid),this.password=t(this.options.password),this.pc=this.options.pc?t(this.options.pc):!1,this.ac=null,this._init())}var s=(i.utils,{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}),r=["sohu.com","163.com","126.com","qq.com","sogou.com","focus.cn","vip.sohu.com","chinaren.com","17173.com","game.sohu.com","37wanwan.com"];e.prototype={_init:function(){var i=this.options.appendTo||this.input.parent();this.ul=t("<ul></ul>").addClass(this.options.containerClassName).appendTo(t(i)),this.options.title&&this.ul.append(t("<li></li>").addClass(this.options.titleClassName).text(this.options.title)),0===this.options.width?this.ul.innerWidth(this.input.innerWidth()):this.ul.innerWidth(this.options.width),this.input.attr("autocomplete","off"),this.hide()},_prepareDomainList:function(){for(var t=0;t<this.options.domainList.length;t++)-1===this.options.domainList[t].indexOf("@")&&(this.options.domainList[t]="@"+this.options.domainList[t])},_bindEvent:function(){if(this.input.is('input[type="text"]')){var i=this;this.input.on("focus.passport",function(){i.blursid&&clearTimeout(i.blursid),i.previousValue=i.input.val(),i.position()}).on("blur.passport",function(){i.sid&&clearTimeout(i.sid),i.blursid=setTimeout(function(){i.hide()},200)}).on("keydown.passport",function(t){i.keypress=!1,i._keycodeHandler(t)}).on("keypress.passport",function(t){t.keyCode===s.ENTER&&t.preventDefault()}).on("keyup.passport",function(t){i._keycodeHandler(t),i._change()}),t(window).on("resize.passport",function(){i.position()}),this.ul.on("mouseenter.passport","li."+this.options.itemClassName,function(){t(this).addClass(i.options.itemActiveClassName).siblings().removeClass(i.options.itemActiveClassName),i.options.autoselect&&i._select(!0)}).on("click.passport","li."+this.options.itemClassName,function(){i._select()})}},_keycodeHandler:function(t){var i=t.keyCode;if(this.keypress)return void(this.keypress=!1);switch(i){case s.UP:t.preventDefault(),this._move("up");break;case s.DOWN:t.preventDefault(),this._move("down");break;case s.ENTER:t.preventDefault(),this._select();break;case s.ESCAPE:this.hide()}},_move:function(t){this.keypress=!0;var i,o=this.ul.find("."+this.options.itemActiveClassName);"up"==t?(i=o.prev("."+this.options.itemClassName),i.length||(i=this.ul.find("."+this.options.itemClassName).last())):"down"==t&&(i=o.next(),i.length||(i=this.ul.find("."+this.options.itemClassName).first())),i.length&&(o.removeClass(this.options.itemActiveClassName),i.addClass(this.options.itemActiveClassName)),this.options.autoselect&&this._select(!0)},_select:function(t){var i=this.ul.find("."+this.options.itemActiveClassName).text();if(i){if(this.input.val(i),t)return void(this.previousValue=i);this.hide(),this.previousValue="","function"==typeof this.options.onselected&&this.options.onselected(i)}},_change:function(){var t=this;this.sid&&clearTimeout(this.sid),this.previousValue!=this.input.val()&&(this.sid=setTimeout(function(){t.previousValue=t.input.val(),t._suggest()},this.options.delay))},_suggest:function(){var i,o=t.trim(this.input.val()),e=this.getSuggestList(o),n=e.length;if(0===n)return void this.hide();this.ul.find("."+this.options.itemClassName).remove(),this.options.limit>0&&n>this.options.limit&&(n=this.options.limit);for(var s=0;n>s;s++)i=t("<li></li>").addClass(this.options.itemClassName).html(e[s]),0===s&&i.addClass(this.options.itemActiveClassName),this.ul.append(i);this.show()},getSuggestList:function(t){if(""===t)return[];var i,o,e=[],n=[].concat(this.lastdomain,["uniqname"],this.options.domainList),s={};for(i=0;i<n.length;i++)o=this.parseSuggestItem(t,n[i]),o&&!s[o]&&(e.push(o),s[o]=1);return e},parseSuggestItem:function(t,i){var o="",e=t.indexOf("@"),n="";return"uniqname"===i?-1===e&&(o=t):0===i.indexOf("@")?(n=e>-1?t.substr(0,e):t,i=n+i,0===i.indexOf(t)&&(o=i)):0===i.indexOf(t)&&(o=i),o},destroy:function(){this.input.off(".passport"),t(window).off(".passport"),this.ul.remove()},position:function(){var t,i,o;t=this.ul.parent().is("body")?this.input.offset():this.input.position(),i=t.left,o=t.top+this.input.outerHeight(),this.ul.css({left:this.options.left>=0?this.options.left:i,top:this.options.top>=0?this.options.top:o})},show:function(){this.ul.show(),this.position()},hide:function(){this.visible()&&this.ul.hide()},visible:function(){return this.ul.is(":visible")}},i.autocomplete=function(t,i){var o=new e(t,i);return{destroy:function(){return o.destroy()},position:function(){return o.position()},show:function(){return o.show()},hide:function(){return o.hide()},visible:function(){return o.visible()}}},n.prototype={_init:function(){var i=this;this.options.autocomplete&&(this.ac=new e(this.userid,{onselected:function(){i.password.focus()}}));var o=this.sp.lastdomain();o.length>0&&this.userid.val(o.pop()),this.sp.on("error",function(o){t.isFunction(i.options.onerror)&&i.options.onerror(o)}),this.sp.on("beforeloginsubmit",function(){t.isFunction(i.options.onbeforeloginsubmit)&&(i.options.onbeforeloginsubmit()||i.sp.abortLoginSubmit())}),this.sp.on("loginsubmit",function(){t.isFunction(i.options.onloginsubmit)&&i.options.onloginsubmit()}),this.sp.on("login",function(){t.isFunction(i.options.onlogin)&&i.options.onlogin()}),this.sp.on("logout",function(){t.isFunction(i.options.onlogout)&&i.options.onlogout()})},passport:function(){return this.sp},login:function(i){var o=this.userid.val(),e=this.password.val(),n=this.pc?this.pc.prop("checked"):!1,s=this.options.loginType;this.sp.login(t.extend({userid:o,password:e,pc:n},i||{}),s)},logout:function(){var t=this.options.logoutType;this.sp.logout({},t)}},i.handler=function(t){var i=new n(t);return{passport:function(){return i.passport()},login:function(t){return i.login(t)},logout:function(){return i.logout()}}}});